{% extends 'base.html.twig' %}
{% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.css">

    <style>
        .img-coach {
            height: 200px;
            width: 200px;
            box-shadow: 10px 10px 35px 10px rgba(0, 0, 0, 1);
        }

        .card {

        }
        .card-header {
            color: rgba(0, 0, 0, .9);

        }
        .card-body {
            background-color: rgba(0, 0, 0, .9);

        }
        .carousel-item {
            max-height:250px;
        }

        #calendar-holder {
            color: rgba(255, 255, 255, .9);
            font-size: .8em;
        }
        .carousel {
            box-shadow: 0px 0px 25px 30px rgba(0, 0, 0, .5);
        }
        .select2-results__option {
            color: rgba(0, 0, 0, .9);;
        }

    </style>
{% endblock %}
{% block body %}


{#               <h1 class="display-4 mt-5">Réserver votre séance de {{ fichefull.domaine }} avec {{ fichefull.prenom }}</h1>#}


            <div id="carouselExampleFade" class="carousel slide carousel-fade slide-top" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="{{ asset('slides/slideCoach.jpg') }}" class="d-block w-100 img-fluid" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="{{ asset('slides/slide2-bis.jpg') }}" class="d-block w-100 img-fluid" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="{{ asset('slides/slide3-bis.jpg') }}" class="d-block w-100 img-fluid" alt="...">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>




    <div class="container">
    <div class="row mt-5">

        <div class="col-lg-8">
                <div class="row">
                    <div class="col-4">
                        <img class="rounded-circle img-coach text-center" src="{{ vich_uploader_asset(fichefull, 'imageFile') }}" alt="">
                    </div>
                    <div class="col mt-4 ml-5">

                            <h4 class="display-4" style="color: white; font-size: 2.5em;">{{ fichefull.nom }} {{ fichefull.prenom }}</h4><br>
                        <p>
                            Domaine : {{ fichefull.domaine }}<br>
                            Age : {{ fichefull.age }}<br>
                            Ville : {{ fichefull.ville }}<br>
                            Prix : {{ fichefull.prix }}€/h <br>
                            <a href="{{ vich_uploader_asset(fichefull, 'diplomeFile') }}" alt="">Qualifications/Diplômes</a>
                        </p>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col">
                        <h3 class="display-4">A propos de moi</h3>
                        <p>
                            {#            {{ fichefull.description_coach }}#}
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. A at debitis facilis id inventore magni molestiae quae rem.
                            Eaque fugit illo labore laborum magnam magni quasi ratione similique voluptate voluptatum!
                        </p>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col">
                        <h3 class="display-4">Mon type de séance</h3>
                        <p>
{#                        {{ fichefull.description_seance }}#}
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Asperiores facilis, mollitia odit officiis soluta voluptatibus voluptatum?
                        Accusantium dicta, doloribus, ea earum eveniet exercitationem facere magni mollitia, perferendis repudiandae tempore veritatis.
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam assumenda inventore maxime modi non tenetur ut. Assumenda consequatur, debitis doloribus,
                        inventore laboriosam obcaecati pariatur quaerat quisquam reiciendis sit tempora voluptas.
                        </p>
                    </div>
                </div>

                <div class="row justify-content-center mt-5">
                    <div class="col">
                        <h3 class="display-4">Mon calendrier</h3>
                        {% include '@Calendar/calendar.html' %}
                        <button class="btn btn-sm border border-primary text-primary m-3" id="btn-calendar" onclick="afficherCalendar(); this.onclick=null;">Voir disponibilités</button>
                    </div>
                </div>

                <div class="row mt-5" style="margin-bottom: 150px;">
                    <div class="col">
                        <h3 class="display-4">Ma Localisation</h3>
                        <iframe class=" mt-3"
                                width="100%"
                                height="100%"
                                frameborder="0" style="border:0"
                                src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBb5PjquVcMufKEVLRmvC_g_iyt-78FdTQ&q={{fichefull.ville}}+France" allowfullscreen>
                        </iframe>
                    </div>
                </div>
        </div>

            

            <div class="col-lg-4 mt-5 mb-5">
                <div class="card text-center border-secondary" style="box-shadow: 0px 0px 15px 20px rgba(0, 0, 0, .5);">
                    <div class="card-header bg-primary">
                        Réservation
                    </div>
                    {% if error %}
                    <div class="alert alert-danger"> Ce coach est déjà réservé pour cette date.</div>
                    {% endif %}
                    <div class="card-body p-5">
                        {% if is_granted("ROLE_CLIENT") %}
                        <p style="color: white;">
                            {{ form_start(formRdv, {attr: { 'id': 'payment-form'}}) }}

                            {{ form_rest(formRdv) }}
                            

                            <button class="btn btn-primary m-3">Réserver</button>
                            {{ form_end(formRdv) }}
                           
                        </p>
                        {% else %}
                            <p>Vous devez être connecté/inscrit pour réserver! </p>
                            <button class="btn btn-sm border border-primary text-primary m-3"><a href="{{path('app_login')}}">Connection</a>/<a href="{{path('inscriptionClient')}}">Inscription</a> </button>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>


    </div>{#ROW#}
    </div>{#CONTAINER#}


        



        {% block javascripts %}
        
        <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@4.1.0/main.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@4.1.0/main.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@4.1.0/main.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@4.1.0/main.min.js"></script>
        <script>  
      


            function afficherCalendar() {
                var calendarEl = document.getElementById('calendar-holder');
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    defaultView: 'dayGridMonth',
                    editable: false,
                    eventSources: [{
                        url: "/fc-load-events",
                        method: "POST",
                        extraParams: {
                            filters: JSON.stringify({})
                        },
                        failure: () => {
                            // alert("There was an error while fetching FullCalendar!");
                        },
                    },
                    ],
                    header: {
                        left: 'prev,next',
                        center: 'title',
                        right: 'dayGridMonth',
                    },
                    plugins: ['interaction', 'dayGrid', 'timeGrid'], // https://fullcalendar.io/docs/plugin-index
                    timeZone: 'UTC',
                });
                calendar.render();
            }

        </script>


    {% endblock %}

{% endblock %}
